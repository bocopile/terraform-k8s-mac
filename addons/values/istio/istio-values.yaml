global:
  proxy:
    autoInject: enabled
  # Security: mTLS 강제 적용 (STRICT mode)
  mtls:
    enabled: true
  # Security: SecurityContext 설정
  securityContext:
    runAsUser: 1337
    runAsGroup: 1337
    runAsNonRoot: true
    fsGroup: 1337
    seccompProfile:
      type: RuntimeDefault

gateways:
  istio-ingressgateway:
    type: LoadBalancer
    # High Availability: Ingress Gateway 복제본
    replicaCount: 2
    podDisruptionBudget:
      enabled: true
      minAvailable: 1
    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
          - weight: 100
            podAffinityTerm:
              labelSelector:
                matchLabels:
                  app: istio-ingressgateway
              topologyKey: kubernetes.io/hostname
    ports:
      - port: 80
        targetPort: 8080
        name: http
      - port: 443
        targetPort: 8443
        name: https
    serviceAnnotations: {}

pilot:
  # High Availability: Istiod (Control Plane) 복제본
  replicaCount: 2
  podDisruptionBudget:
    enabled: true
    minAvailable: 1
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchLabels:
                app: istiod
            topologyKey: kubernetes.io/hostname
  autoscaleEnabled: false